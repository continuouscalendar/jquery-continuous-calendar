$.continuousCalendar={};$.continuousCalendar.version="2.2.5";$.continuousCalendar.released="2012-12-31";(function(a,b){if(typeof define==="function"&&define.amd){define(["jquery"],b)}else{a.DateTime=b(a.jQuery)}})(this,function(b){var c=function(h,i,f,e,g){if(typeof h=="string"){this.date=new Date(h)}else{if(typeof h=="object"){this.date=h}else{if(typeof h=="number"){this.date=new Date(h,i-1,f,e,g,0,0)}else{this.date=new Date()}}}};b.each(["getTime","getFullYear","getMonth","getDate","getDay","getHours","getMinutes","getSeconds","getMilliseconds"],function(f,e){c.prototype[e]=function(){return this.date[e]()}});c.fromIsoDate=function(f){var e=d(f.split("T")[0]);return new c(e.year,e.month,e.day,0,0)};c.fromIsoDateTime=function(f){var h=f.split("T");var g=a(h.length==2&&h[1]);var e=d(h[0]);return new c(e.year,e.month,e.day,g.hours,g.minutes)};function d(f){var e=f.split("-");return{year:parseInt(e[0],10),month:parseInt(e[1]),day:parseInt(e[2])}}function a(e){if(e){var f=e.split(":");return{hours:parseInt(f[0],10),minutes:parseInt(f[1],10)}}else{return{hours:0,minutes:0}}}c.prototype.withTime=function(g,f){if(typeof g=="string"){var e=g.split(":");g=e[0];f=e[1]}var i=this.clone();i.date.setHours(g);i.date.setMinutes(f);i.date.setSeconds(0);i.date.setMilliseconds(0);return i};c.DAYS_IN_MONTH=[31,28,31,30,31,30,31,31,30,31,30,31];c.SECOND=1000;c.MINUTE=60*c.SECOND;c.HOUR=60*c.MINUTE;c.DAY=24*c.HOUR;c.WEEK=7*c.DAY;c.now=function(){if(typeof c._now=="undefined"){c._now=new c()}return c._now};c.getDaysInMonth=function(e,f){if(((0==(e%4))&&((0!=(e%100))||(0==(e%400))))&&f==1){return 29}else{return c.DAYS_IN_MONTH[f]}};c.getDayInYear=function(g,h,e){var j=0;for(var f=0;f<h;f++){j+=c.getDaysInMonth(g,f)}j+=e;return j};c.prototype.getDaysInMonth=function(){return c.getDaysInMonth(this.getFullYear(),this.getMonth())};c.prototype.getDayInYear=function(){return c.getDayInYear(this.getFullYear(),this.getMonth(),this.getDate())};c.prototype.plusDays=function(h){var f=this.clone();var e=this.getHours();f.date.setTime(this.getTime()+h*c.DAY);var g=e-f.getHours();if(g!=0){if(g>12){g-=24}if(g<-12){g+=24}f.date.setTime(f.getTime()+(g*c.HOUR))}return f};c.prototype.stripped=function(){return new Date(parseInt(this.getTime()/c.DAY,10))};c.prototype.compareTo=function(f){if(!f){return 1}var e=this.getTime();var g=f.getTime();if(e<g){return -1}else{if(e>g){return 1}else{return 0}}};c.prototype.isToday=function(){return this.equalsOnlyDate(c.now())};c.prototype.getWeekInYear=function(f){if(f!="US"&&f!="ISO"){throw ("Week numbering system must be either US or ISO, was "+f)}var e=new Date(this.getFullYear(),0,1).getDay();if(f=="US"){return Math.ceil((this.getDayInYear()+e)/7)}var i=4;var h=this.getDay();if(h==0){h=7}if(e==0){e=7}if(this.getMonth()==11&&this.getDate()>=29&&(this.getDate()-h)>27){return 1}if(this.getMonth()==0&&this.getDate()<4&&h>i){return new c(new Date(this.getFullYear()-1,11,31)).getWeekInYear("ISO")}var g=Math.ceil((this.getDayInYear()+e-1)/7);if(e>i){g--}return g};c.prototype.clone=function(){return new c(new Date(this.getTime()))};c.prototype.isOddMonth=function(){return this.getMonth()%2!=0};c.prototype.equalsOnlyDate=function(e){if(!e){return false}return this.getMonth()==e.getMonth()&&this.getDate()==e.getDate()&&this.getFullYear()==e.getFullYear()};c.prototype.isBetweenDates=function(f,e){return this.compareTo(f)>=0&&this.compareTo(e)<=0};c.prototype.firstDateOfMonth=function(){return new c((this.getMonth()+1)+"/1/"+this.getFullYear())};c.prototype.lastDateOfMonth=function(){return new c((this.getMonth()+1)+"/"+this.getDaysInMonth()+"/"+this.getFullYear())};c.prototype.distanceInDays=function(e){var g=parseInt(this.getTime()/c.DAY,10);var f=parseInt(e.getTime()/c.DAY,10);return(f-g)};c.prototype.withWeekday=function(e){return this.plusDays(e-this.getDay())};c.prototype.getOnlyDate=function(){return new c(new Date(this.getFullYear(),this.getMonth(),this.getDate()))};c.prototype.getTimezone=function(){return this.date.toString().replace(/^.*? ([A-Z]{3}) [0-9]{4}.*$/,"$1").replace(/^.*?\(([A-Z])[a-z]+ ([A-Z])[a-z]+ ([A-Z])[a-z]+\)$/,"$1$2$3")};c.prototype.getDayOfYear=function(){var e=0;c.daysInMonth[1]=this.isLeapYear()?29:28;for(var f=0;f<this.getMonth();++f){e+=c.daysInMonth[f]}return e+this.getDate()-1};c.prototype.isLeapYear=function(){var e=this.getFullYear();return((e&3)==0&&(e%100||(e%400==0&&e)))};c.prototype.getDaysInMonth=function(){c.daysInMonth[1]=this.isLeapYear()?29:28;return c.daysInMonth[this.getMonth()]};c.prototype.getSuffix=function(){switch(this.getDate()){case 1:case 21:case 31:return"st";case 2:case 22:return"nd";case 3:case 23:return"rd";default:return"th"}};c.prototype.isWeekend=function(){return this.getDay()==6||this.getDay()==0};c.prototype.toString=function(){return this.date.toISOString()};c.daysInMonth=[31,28,31,30,31,30,31,31,30,31,30,31];c.y2kYear=50;c.monthNumbers={Jan:0,Feb:1,Mar:2,Apr:3,May:4,Jun:5,Jul:6,Aug:7,Sep:8,Oct:9,Nov:10,Dec:11};return c});(function(a,b){if(typeof define==="function"&&define.amd){define(b)}else{a.DateLocale=b()}})(this,function(){var a={};a.MONDAY=1;a.FRIDAY=5;a.SUNDAY=0;a.hoursAndMinutes=function(b,c){return(Math.round((b+c/60)*100)/100).toString()};a.FI={id:"FI",monthNames:["tammikuu","helmikuu","maaliskuu","huhtikuu","toukokuu","kesäkuu","heinäkuu","elokuu","syyskuu","lokakuu","marraskuu","joulukuu"],dayNames:["sunnuntai","maanantai","tiistai","keskiviikko","torstai","perjantai","lauantai"],shortDayNames:["su","ma","ti","ke","to","pe","la"],yearsLabel:function(b){return b+" "+(b=="1"?"vuosi":"vuotta")},monthsLabel:function(b){return b+" "+(b=="1"?"kuukausi":"kuukautta")},daysLabel:function(b){return b+" "+(b=="1"?"päivä":"päivää")},hoursLabel:function(c,d){var b=a.hoursAndMinutes(c,d).replace(".",",");return b+" "+(b=="1"?"tunti":"tuntia")},shortDateFormat:"j.n.Y",weekDateFormat:"D j.n.Y",dateTimeFormat:"D j.n.Y k\\lo G:i",firstWeekday:a.MONDAY,getFirstDateOfWeek:function(b){return a.getFirstDateOfWeek(b,a.MONDAY)}};a.EN={id:"EN",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],yearsLabel:function(b){return b+" "+(b=="1"?"Year":"Years")},monthsLabel:function(b){return b+" "+(b=="1"?"Months":"Months")},daysLabel:function(b){return b+" "+(b=="1"?"Day":"Days")},hoursLabel:function(c,d){var b=a.hoursAndMinutes(c,d);return b+" "+(b=="1"?"Hour":"Hours")},shortDateFormat:"n/j/Y",weekDateFormat:"D n/j/Y",dateTimeFormat:"D n/j/Y G:i",firstWeekday:a.SUNDAY,getFirstDateOfWeek:function(b){return a.getFirstDateOfWeek(b,a.SUNDAY)}};a.AU={id:"AU",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],yearsLabel:function(b){return b+" "+(b=="1"?"Year":"Years")},monthsLabel:function(b){return b+" "+(b=="1"?"Months":"Months")},daysLabel:function(b){return b+" "+(b=="1"?"Day":"Days")},hoursLabel:function(c,d){var b=a.hoursAndMinutes(c,d);return b+" "+(b=="1"?"Hour":"Hours")},shortDateFormat:"j/n/Y",weekDateFormat:"D j/n/Y",dateTimeFormat:"D j/n/Y G:i",firstWeekday:a.SUNDAY,getFirstDateOfWeek:function(b){return a.getFirstDateOfWeek(b,a.SUNDAY)}};a.ET={id:"ET",monthNames:["Jaanuar","Veebruar","Märts","Aprill","Mai","Juuni","Juuli","August","September","Oktoober","November","Detsember"],dayNames:["Pühapäev","Esmaspäev","Teisipäev","Kolmapäev","Neljapäev","Reede","Laupäev"],shortDayNames:["Pü","Es","Te","Ko","Ne","Re","La"],yearsLabel:function(b){return b+" "+(b=="1"?"Aasta":"Aastat")},monthsLabel:function(b){return b+" "+(b=="1"?"Kuu":"Kuud")},daysLabel:function(b){return b+" "+(b=="1"?"Päev":"Päeva")},hoursLabel:function(c,d){var b=a.hoursAndMinutes(c,d).replace(".",",");return b+" "+(b=="1"?"Tund":"Tundi")},shortDateFormat:"j.n.Y",weekDateFormat:"D j.n.Y",dateTimeFormat:"D j.n.Y k\\lo G:i",firstWeekday:a.MONDAY,getFirstDateOfWeek:function(b){return a.getFirstDateOfWeek(b,a.MONDAY)}};a.RU={id:"RU",monthNames:["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"],dayNames:["Воскресенье","Понедельник","Вторник","Среда","Четверг","Пятница","Суббота"],shortDayNames:["Вс","Пн","Вт","Ср","Чт","Пт","Сб"],yearsLabel:function(b){return b+" "+(b=="1"?"Год":"Года")},monthsLabel:function(b){return b+" "+(b=="1"?"Месяц":"Месяца")},daysLabel:function(b){return b+" "+(b=="1"?"День":"Дня")},hoursLabel:function(c,d){var b=a.hoursAndMinutes(c,d).replace(".",",");return b+" "+(b=="1"?"Минута":"Минуты")},shortDateFormat:"j.n.Y",weekDateFormat:"D j.n.Y",dateTimeFormat:"D j.n.Y k\\lo G:i",firstWeekday:a.MONDAY,getFirstDateOfWeek:function(b){return a.getFirstDateOfWeek(b,a.MONDAY)}};a.SV={id:"SV",monthNames:["Januari","Februari","Mars","April","Maj","Juni","Juli","Augusti","September","Oktober","November","December"],dayNames:["Söndag","Måndag","Tisdag","Onsdag","Torsdag","Fredag","Lördag"],shortDayNames:["Sö","Må","Ti","On","To","Fr","Lö"],yearsLabel:function(b){return b+" "+(b=="1"?"År":"År")},monthsLabel:function(b){return b+" "+(b=="1"?"Månad":"Månader")},daysLabel:function(b){return b+" "+(b=="1"?"Dag":"Dagar")},hoursLabel:function(c,d){var b=a.hoursAndMinutes(c,d).replace(".",",");return b+" "+(b=="1"?"Minut":"Minuter")},shortDateFormat:"j.n.Y",weekDateFormat:"D j.n.Y",dateTimeFormat:"D j.n.Y k\\lo G:i",firstWeekday:a.MONDAY,getFirstDateOfWeek:function(b){return a.getFirstDateOfWeek(b,a.MONDAY)}};a.DEFAULT=a.EN;a.getFirstDateOfWeek=function(b,c){if(c<b.getDay()){return b.plusDays(c-b.getDay())}else{if(c>b.getDay()){return b.plusDays(c-b.getDay()-7)}else{return b.clone()}}};a.fromArgument=function(b){if(typeof b=="string"){return a[b.toUpperCase()]}else{return b||a.DEFAULT}};return a});(function(a,b){if(typeof define==="function"&&define.amd){define(["./DateTime"],b)}else{a.DateFormat=b(a.DateTime)}})(this,function(DateTime){var DateFormat={};DateFormat.parseFunctions={count:0};DateFormat.parseRegexes=[];DateFormat.formatFunctions={count:0};DateFormat.format=function(dateTime,format,locale){if(DateFormat.formatFunctions[format]==null){DateFormat.createNewFormat(dateTime,format,locale)}var func=DateFormat.formatFunctions[format];return dateTime[func]()};DateFormat.shortDateFormat=function(dateTime,locale){return DateFormat.format(dateTime,locale?locale.shortDateFormat:"n/j/Y",locale)};DateFormat.formatRange=function(dateRange,locale){if(dateRange._hasTimes){return locale.daysLabel(dateRange.days())+" "+locale.hoursLabel(dateRange.hours(),dateRange.minutes())}else{return DateFormat.shortDateFormat(dateRange.start,locale)+" - "+DateFormat.shortDateFormat(dateRange.end,locale)}};DateFormat.formatDefiningRangeDuration=function(dateRange,locale){var years=parseInt(dateRange.days()/360,10);if(years>0){return locale.yearsLabel(years)}var months=parseInt(dateRange.days()/30,10);if(months>0){return locale.monthsLabel(months)}return locale.daysLabel(dateRange.days())};DateFormat.getWeekOfYear=function(dateTime){var now=dateTime.getDayOfYear()+(4-dateTime.getDay());var jan1=new Date(dateTime.getFullYear(),0,1);var then=(7-jan1.getDay()+4);document.write(then);return DateFormat.leftPad(((now-then)/7)+1,2,"0")};DateFormat.getGMTOffset=function(dateTime){return(dateTime.date.getTimezoneOffset()>0?"-":"+")+DateFormat.leftPad(Math.floor(dateTime.getTimezoneOffset()/60),2,"0")+DateFormat.leftPad(dateTime.getTimezoneOffset()%60,2,"0")};DateFormat.leftPad=function(val,size,ch){var result=new String(val);if(ch==null){ch=" "}while(result.length<size){result=ch+result}return result};DateFormat.escape=function(string){return string.replace(/('|\\)/g,"\\$1")};DateFormat.parse=function(input,locale){if(input=="today"){return DateTime.now()}var date=new Date(input);if(isNaN(date.getTime())){throw Error('Could not parse date from "'+input+'"')}return new DateTime(date,locale)};DateFormat.patterns={ISO8601LongPattern:"Y-m-d H:i:s",ISO8601ShortPattern:"Y-m-d",ShortDatePattern:"n/j/Y",FiShortDatePattern:"j.n.Y",FiWeekdayDatePattern:"D j.n.Y",FiWeekdayDateTimePattern:"D j.n.Y k\\lo G:i",LongDatePattern:"l, F d, Y",FullDateTimePattern:"l, F d, Y g:i:s A",MonthDayPattern:"F d",ShortTimePattern:"g:i A",LongTimePattern:"g:i:s A",SortableDateTimePattern:"Y-m-d\\TH:i:s",UniversalSortableDateTimePattern:"Y-m-d H:i:sO",YearMonthPattern:"F, Y"};DateFormat.parseTime=function(timeStr){var splittedTime=splitTime(timeStr.replace(/:|,/i,"."));var time=[parseInt(splittedTime[0],10),parseInt(splittedTime[1],10)];return(isHour(time[0])&&isMinute(time[1]))?time:null;function splitTime(timeStr){if(timeStr.indexOf(".")!=-1){return timeStr.split(".")}switch(timeStr.length){case 4:return[timeStr.slice(0,2),timeStr.slice(2,4)];case 3:return[timeStr.slice(0,1),timeStr.slice(1,3)];case 2:return[timeStr,0];default:return[-1,-1]}}function isMinute(minutes){return !isNaN(minutes)&&minutes>=0&&minutes<=59}function isHour(hours){return !isNaN(hours)&&hours>=0&&hours<=23}};DateFormat.createNewFormat=function(dateTime,format,locale){var funcName="format"+DateFormat.formatFunctions.count++;DateFormat.formatFunctions[format]=funcName;var code="DateTime.prototype."+funcName+" = function(){return ";var special=false;var ch="";for(var i=0;i<format.length;++i){ch=format.charAt(i);if(!special&&ch=="\\"){special=true}else{if(special){special=false;code+="'"+DateFormat.escape(ch)+"' + "}else{code+=DateFormat.getFormatCode(ch,locale)}}}eval(code.substring(0,code.length-3)+";}")};DateFormat.getFormatCode=function(character){switch(character){case"d":return"DateFormat.leftPad(this.getDate(), 2, '0') + ";case"D":return"locale.shortDayNames[this.getDay()] + ";case"j":return"this.getDate() + ";case"l":return"locale.dayNames[this.getDay()] + ";case"S":return"this.getSuffix() + ";case"w":return"this.getDay() + ";case"z":return"this.getDayOfYear() + ";case"W":return"DateFormat.getWeekOfYear(this) + ";case"F":return"locale.monthNames[this.getMonth()] + ";case"m":return"DateFormat.leftPad(this.getMonth() + 1, 2, '0') + ";case"M":return"locale.monthNames[this.getMonth()].substring(0, 3) + ";case"n":return"(this.getMonth() + 1) + ";case"t":return"this.getDaysInMonth() + ";case"L":return"(this.isLeapYear() ? 1 : 0) + ";case"Y":return"this.getFullYear() + ";case"y":return"('' + this.getFullYear()).substring(2, 4) + ";case"a":return"(this.getHours() < 12 ? 'am' : 'pm') + ";case"A":return"(this.getHours() < 12 ? 'AM' : 'PM') + ";case"g":return"((this.getHours() %12) ? this.getHours() % 12 : 12) + ";case"G":return"this.getHours() + ";case"h":return"DateFormat.leftPad((this.getHours() %12) ? this.getHours() % 12 : 12, 2, '0') + ";case"H":return"DateFormat.leftPad(this.getHours(), 2, '0') + ";case"i":return"DateFormat.leftPad(this.getMinutes(), 2, '0') + ";case"s":return"DateFormat.leftPad(this.getSeconds(), 2, '0') + ";case"O":return"DateFormat.getGMTOffset(this) + ";case"T":return"this.getTimezone() + ";case"Z":return"(this.getTimezoneOffset() * -60) + ";default:return"'"+DateFormat.escape(character)+"' + "}};return DateFormat});(function(a,b){if(typeof define==="function"&&define.amd){define(["jquery","./DateTime","./DateFormat"],b)}else{a.DateRange=b(a.jQuery,a.DateTime,a.DateFormat)}})(this,function(b,c,a){function d(f,e){if(!f||!e){throw ("two dates must be specified, date1="+f+", date2="+e)}this.start=(f.compareTo(e)>0?e:f);this.end=(f.compareTo(e)>0?f:e);this._days=0;this._hours=0;this._minutes=0;this._valid=true}d.prototype={_setDaysHoursAndMinutes:function(){if(this._hasTimes){var e=parseInt((this.end.getTime()-this.start.getTime()),10);this._days=parseInt(e/c.DAY,10);e=e-(this._days*c.DAY);this._hours=parseInt(e/c.HOUR,10);e=e-(this._hours*c.HOUR);this._minutes=parseInt(e/c.MINUTE,10)}},_dateWithTime:function(e,f){return e.withTime(f[0],f[1])},hours:function(){return this._hours},minutes:function(){return this._minutes},hasDate:function(e){return e.isBetweenDates(this.start,this.end)},isValid:function(){return this._valid&&this.end.getTime()-this.start.getTime()>=0},days:function(){if(this._hasTimes){return this._days}else{return Math.round(this.start.distanceInDays(this.end)+1)}},shiftDays:function(e){return new d(this.start.plusDays(e),this.end.plusDays(e))},expandTo:function(f){var e=this.start.clone();var g=this.end.clone();if(f.compareTo(this.start)<0){e=f}else{if(f.compareTo(this.end)>0){g=f}}return new d(e,g)},expandDaysTo:function(e){return new d(this.start,this.start.plusDays(e-1))},hasValidSize:function(e){return e<0||this.days()>=e},hasValidSizeAndEndsOnWorkWeek:function(e){return this.hasValidSize(e)&&this.hasEndsOnWeekend()},and:function(e){var g=this.start.compareTo(e.start)>0?this.start:e.start;var f=this.end.compareTo(e.end)>0?e.end:this.end;if(g.compareTo(f)<0){return new d(g,f)}else{return d.emptyRange()}},isInside:function(e){return this.start.compareTo(e.start)>=0&&this.end.compareTo(e.end)<=0},hasEndsOnWeekend:function(){return this.start.isWeekend()||this.end.isWeekend()},withTimes:function(i,h){var g=a.parseTime(i);var e=a.parseTime(h);var f=this.clone();if(g&&e){f._valid=true;f._hasTimes=true;f.start=this._dateWithTime(this.start,g);f.end=this._dateWithTime(this.end,e);f._setDaysHoursAndMinutes()}else{f._valid=false}return f},clone:function(){return new d(this.start,this.end)},toString:function(){return["DateRange:",this.start.toString(),"-",this.end.toString(),this._days,"days",this._hours,"hours",this._minutes,"minutes",this._valid?"valid":"invalid"].join(" ")},isPermittedRange:function(g,e,f){return this.hasValidSize(g)&&(!(e&&this.hasEndsOnWeekend()))&&this.isInside(f)},shiftInside:function(f){if(this.days()>f.days()){return d.emptyRange()}var g=this.start.distanceInDays(f.start);var e=this.end.distanceInDays(f.end);if(g>0){return this.shiftDays(g)}if(e<0){return this.shiftDays(e)}return this}};d=b.extend(d,{emptyRange:function(){function e(){this.start=null;this.end=null;this.days=function(){return 0};this.shiftDays=b.noop;this.hasDate=function(){return false};this.clone=function(){return d.emptyRange()};this.expandDaysTo=function(){return this};this.hasEndsOnWeekend=function(){return false};this.isPermittedRange=function(){return true}}return new e()},rangeWithMinimumSize:function(k,j,f,i){if(g()){var e=k.expandDaysTo(j);if(f&&e.hasEndsOnWeekend()){var h=e.shiftDays(l(e.end.getDay())).shiftInside(i);while(!h.isPermittedRange(j,f,i)||h.end.compareTo(i.end)>0){if(!h.isPermittedRange(j,false,i)){return d.emptyRange()}h=h.shiftDays(1)}e=h}if(!e.isPermittedRange(j,false,i)){return d.emptyRange()}return e}return k;function g(){return j&&k.days()<=j}function l(m){return -((m+1)%7+1)}}});return d})
/*!
 * Tiny Scrollbar 1.66
 * http://www.baijs.nl/tinyscrollbar/
 *
 * Copyright 2010, Maarten Baijs
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://www.opensource.org/licenses/mit-license.php
 * http://www.opensource.org/licenses/gpl-2.0.php
 *
 * Date: 13 / 11 / 2011
 * Depends on library: jQuery
 * 
 */
;(function(a){a.tiny=a.tiny||{};a.tiny.scrollbar={options:{axis:"y",wheel:40,scroll:true,size:"auto",sizethumb:"auto"}};a.fn.tinyscrollbar=function(c){var c=a.extend({},a.tiny.scrollbar.options,c);this.each(function(){a(this).data("tsb",new b(a(this),c))});return this};a.fn.tinyscrollbar_update=function(c){return a(this).data("tsb").update(c)};function b(p,f){var j=this;var s=p;var i={obj:a(".viewport",p)};var g={obj:a(".overview",p)};var d={obj:a(".scrollbar",p)};var l={obj:a(".track",d.obj)};var o={obj:a(".thumb",d.obj)};var k=f.axis=="x",m=k?"left":"top",u=k?"Width":"Height";var q,x={start:0,now:0},n={};function c(){j.update();r();return j}this.update=function(B){var C=f.axis;i[C]=i.obj[0]["offset"+u];g[C]=g.obj[0]["scroll"+u];var D=g[C];var y=i[C];g.ratio=y/D;d.obj.toggleClass("disable",g.ratio>=1);l[C]=f.size=="auto"?y:f.size;var z=l[C];o[C]=Math.min(z,Math.max(0,(f.sizethumb=="auto"?(z*g.ratio):f.sizethumb)));var A=o[C];d.ratio=f.sizethumb=="auto"?(D/z):(D-y)/(z-A);q=(B=="relative"&&g.ratio<=1)?Math.min((D-y),Math.max(0,q)):0;q=(B=="bottom"&&g.ratio<=1)?(D-y):isNaN(parseInt(B,10))?q:parseInt(B,10);v()};function v(){o.obj.css(m,q/d.ratio);g.obj.css(m,-q);n.start=o.obj.offset()[m];var y=u.toLowerCase();d.obj.css(y,l[f.axis]);l.obj.css(y,l[f.axis]);o.obj.css(y,o[f.axis])}function r(){o.obj.bind("mousedown",h);o.obj[0].ontouchstart=function(y){y.preventDefault();o.obj.unbind("mousedown");h(y.touches[0]);return false};l.obj.bind("mouseup",t);if(f.scroll&&this.addEventListener){s[0].addEventListener("DOMMouseScroll",w,false);s[0].addEventListener("mousewheel",w,false)}else{if(f.scroll){s[0].onmousewheel=w}}}function h(z){n.start=k?z.pageX:z.pageY;var y=parseInt(o.obj.css(m),10);x.start=y=="auto"?0:y;a(document).bind("mousemove",t);document.ontouchmove=function(A){a(document).unbind("mousemove");t(A.touches[0])};a(document).bind("mouseup",e);o.obj.bind("mouseup",e);o.obj[0].ontouchend=document.ontouchend=function(A){a(document).unbind("mouseup");o.obj.unbind("mouseup");e(A.touches[0])};return false}function w(z){if(!(g.ratio>=1)){var z=z||window.event;var y=z.wheelDelta?z.wheelDelta/120:-z.detail/3;q-=y*f.wheel;q=Math.min((g[f.axis]-i[f.axis]),Math.max(0,q));o.obj.css(m,q/d.ratio);g.obj.css(m,-q);z=a.event.fix(z);z.preventDefault()}}function e(y){a(document).unbind("mousemove",t);a(document).unbind("mouseup",e);o.obj.unbind("mouseup",e);document.ontouchmove=o.obj[0].ontouchend=document.ontouchend=null;return false}function t(y){s.trigger("scroll");if(!(g.ratio>=1)){x.now=Math.min((l[f.axis]-o[f.axis]),Math.max(0,(x.start+((k?y.pageX:y.pageY)-n.start))));q=x.now*d.ratio;g.obj.css(m,-q);o.obj.css(m,x.now)}return false}return c()}})(jQuery);(function(a,b){if(typeof define==="function"&&define.amd){define(["jquery","jquery.tinyscrollbar","./DateFormat","./DateLocale","./DateRange","./DateTime"],function(e,c,d,h,g,f){b(e,d,h,g,f)})}else{b(a.jQuery,a.DateFormat,a.DateLocale,a.DateRange,a.DateTime)}})(this,function(b,a,e,d,c){b.fn.continuousCalendar=function(f){return this.each(function(){g.call(b(this),f)});function g(ac){b(this).addClass("continuousCalendarContainer").append("&nbsp;");var U={weeksBefore:26,weeksAfter:26,firstDate:null,lastDate:null,startField:b("input.startDate",this),endField:b("input.endDate",this),isPopup:false,selectToday:false,locale:e.DEFAULT,disableWeekends:false,disabledDates:null,minimumRange:-1,selectWeek:false,fadeOutDuration:0,callback:b.noop,customScroll:false};var av=b.extend({},U,ac);av.locale=e.fromArgument(av.locale);var K={CREATE_OR_RESIZE:"create",MOVE:"move",NONE:"none"};var aE=t(av.startField);var ah=t(av.endField);var V=c.now();if(av.selectToday){var k=G(V);aE=V;ah=V;p(k);ak(k)}var T=av.locale.getFirstDateOfWeek(aE||V);var am=this,ao=[],aH=[],ax={},j=null,O,Y,aF,l,H,L=K.NONE,J,i,aa=true,I,q,M;aA();function aA(){q=b.extend(aq(av.isPopup),ay(af()));aF=aE&&ah?new d(aE,ah,av.locale):d.emptyRange(av.locale);l=aF.clone();var aL=av.firstDate?a.parse(av.firstDate,av.locale):T.plusDays(-(av.weeksBefore*7));var aK=av.lastDate?a.parse(av.lastDate,av.locale):T.plusDays(av.weeksAfter*7+6);av.disabledDates=av.disabledDates?at(av.disabledDates):{};av.fadeOutDuration=parseInt(av.fadeOutDuration,10);H=new d(aL,aK,av.locale);J=y();J.click(function(aM){aM.stopPropagation()});if(b(".startDateLabel",am).isEmpty()){az(am,q)}q.initUI();q.showInitialSelection();q.performTrigger()}function al(){if(av.customScroll){M=b(".tinyscrollbar",am);M.tinyscrollbar()}}function ag(){if(i){return}var aK=b("<table>").addClass("calendarHeader").append(aD());if(av.customScroll){I=b("<table>").addClass("calendarBody").addClass("overview").append(aI());i=b("<div>").addClass("calendarScrollContent").addClass("viewport").append(I);J.append(aK).append(b('<div class="tinyscrollbar"></div>').append('<div class="scrollbar"> <div class="track"> <div class="thumb"> <div class="end"></div> </div> </div> </div>').append(i))}else{I=b("<table>").addClass("calendarBody").append(aI());i=b("<div>").addClass("calendarScrollContent").append(I);J.append(aK).append(i)}ao=b("td.date",am).get();q.initState();q.addRangeLengthLabel();s();Y=b("th.month",aK);D();q.initEvents();if(!av.isPopup){w();S()}}function D(){if(av.customScroll){if(!M){al()}M.bind("scroll",w)}else{var aK=false;i.scroll(function(){aK=true});setInterval(function(){if(aK){aK=false;w()}},250)}}function at(aL){var aK={};b.each(aL.split(" "),function(aN,aM){aK[a.parse(aM).date]=true});return aK}function ay(aM){var aK={showInitialSelection:A,initEvents:function(){R(am,I);aw()},addRangeLengthLabel:function(){if(b(".rangeLengthLabel",am).isEmpty()){var aN=b('<div class="label"><span class="rangeLengthLabel"></span></div>');b(".continuousCalendar",am).append(aN)}},addEndDateLabel:function(aN){aN.append('<span class="separator"> - </span>').append('<span class="endDateLabel"></span>')},performTrigger:function(){am.data("calendarRange",aF);aG(aF)}};var aL={showInitialSelection:function(){if(av.startField.val()){o(a.format(a.parse(av.startField.val()),av.locale.weekDateFormat,av.locale))}},initEvents:function(){au();var aN=aE&&a.format(aE,"Ymd",av.locale);if(aN in ax){Q(ax[aN]).addClass("selected")}},addRangeLengthLabel:b.noop,addEndDateLabel:b.noop,performTrigger:function(){am.data("calendarRange",aE);aG(aE)}};return aM?aK:aL}function aq(aK){var aM={initUI:function(){J.addClass("popup").hide();var aN=b('<a href="#" class="calendarIcon">'+V.getDate()+"</a>").click(E);am.prepend("<div></div>");am.prepend(aN)},initState:b.noop,getContainer:function(aN){return b("<div>").addClass("popUpContainer").append(aN)},close:function(aN){E.call(aN)},addDateLabelBehaviour:function(aN){aN.addClass("clickable");aN.click(E)}};var aL={initUI:ag,initState:B,getContainer:function(aN){return aN},close:b.noop,addDateLabelBehaviour:b.noop};return aK?aM:aL}function s(){var aK=a.format(V,"Ymd",av.locale);if(aK in ax){Q(ax[aK]).addClass("today").wrapInner("<div>")}}function y(){var aK=b(".continuousCalendar",am);if(aK.exists()){return aK}else{var aL=b("<div>").addClass("continuousCalendar");am.append(q.getContainer(aL));return aL}}function az(aK,aM){var aL=b('<div class="label"><span class="startDateLabel"></span></div>');aM.addEndDateLabel(aL);aK.prepend(aL);aM.addDateLabelBehaviour(aL.children())}function R(aL,aK){b("span.rangeLengthLabel",aL).text(av.locale.daysLabel(aF.days()));aK.addClass(av.selectWeek?"weekRange":"freeRange");aK.mousedown(C).mouseover(ap).mouseup(z);aJ(aK.get(0))}function S(){var aL=b(".selected, .today",i).get(0);if(aL){var aK=aL.offsetTop-(i.height()-aL.offsetHeight)/2;if(av.customScroll){var aM=I.height();var aN=aM-i.height();var aO=aK>aN?aN:aK;M.tinyscrollbar_update(aO>0?aO:0)}else{i.scrollTop(aK)}}}function w(){var aK=b(".calendarScrollContent",am).get(0);var aN=b("table",aK).get(0);var aO=av.customScroll?-b(".overview",J).position().top:aK.scrollTop;var aL=parseInt(aO/O,10);var aM=h(aN.rows[aL].cells[2]);Y.text(aM.getFullYear())}function aD(){var aL=b("<tr>").append(aK());aL.append(b('<th class="week">&nbsp;</th>'));b(av.locale.dayNames).each(function(aN){var aM=b("<th>").append(av.locale.dayNames[(aN+av.locale.firstWeekday)%7].substr(0,2)).addClass("weekDay");aL.append(aM)});return b("<thead>").append(aL);function aK(){return b("<th>").addClass("month").append(T.getFullYear())}}function B(){al();P();S()}function P(){O=parseInt(I.height()/b("tr",I).size(),10)}function E(){ag();if(J.is(":visible")){J.fadeOut(av.fadeOutDuration);b(document).unbind("click.continuousCalendar")}else{J.show();if(aa){al();P();w();aa=false}S();b(document).bind("click.continuousCalendar",E)}return false}function aI(){var aL=av.locale.getFirstDateOfWeek(H.start);var aK=true;var aM=[];while(aL.compareTo(H.end)<=0){Z(aM,aL.clone(),aK);aK=false;aL=aL.plusDays(7)}return"<tbody>"+aM.join("")+"</tbody>"}function Z(aO,aL,aK){aO.push("<tr>");aO.push(x(aL,aK));aO.push(ae(aL));for(var aN=0;aN<7;aN++){var aM=aL.plusDays(aN);aO.push(aC(aM))}aO.push("</tr>")}function aC(aK){var aL='<td class="'+F(aK)+'" date-cell-index="'+aH.length+'">'+aK.getDate()+"</td>";ax[a.format(aK,"Ymd",av.locale)]=aH.length;aH.push(aK);return aL}function x(aL,aK){var aM='<th class="month '+ai(aL);if(aK||aL.getDate()<=7){aM+=' monthName">';aM+=av.locale.monthNames[aL.getMonth()]}else{aM+='">';if(aL.getDate()<=7*2&&aL.getMonth()==0){aM+=aL.getFullYear()}}return aM+"</th>"}function ae(aK){return'<th class="week '+ai(aK)+'">'+aK.getWeekInYear("ISO")+"</th>"}function F(aK){return b.trim(["date",ai(aK),r(aK),u(aK),an(aK)].sort().join(" "))}function ai(aK){return aK.isOddMonth()?"odd":""}function r(aK){var aL=av.disableWeekends&&aK.isWeekend();var aM=av.disabledDates[aK.getOnlyDate().date];var aN=!H.hasDate(aK);return aN||aL||aM?"disabled":""}function u(aK){return aK.isToday()?"today":""}function an(aK){return aK.getDay()==0?"holiday":""}function au(){b(".date",am).bind("click",function(){var aL=b(this);if(aL.hasClass("disabled")){return}b("td.selected",am).removeClass("selected");aL.addClass("selected");var aK=h(aL.get(0));av.startField.val(a.shortDateFormat(aK,av.locale));o(a.format(aK,av.locale.weekDateFormat,av.locale));q.close(this);aG(aK)})}function ad(){aF=new d(j,j,av.locale)}function C(aO){var aN=aO.target;var aQ=aO.shiftKey;if(aP(aN,aQ)){aF=aM(aN,aQ);return}L=K.CREATE_OR_RESIZE;j=h(aN);if(j.equalsOnlyDate(aF.end)){j=aF.start;return}if(j.equalsOnlyDate(aF.start)){j=aF.end;return}if(aF.hasDate(j)){L=K.MOVE;return}if(aL(aN)){ad()}function aL(aR){return N(aR)&&ar(aR)}function aP(aR,aS){if(av.selectWeek){return aL(aR)||n(aR)}else{return n(aR)||X(aR)||aS}}function aM(aT,aU){if((av.selectWeek&&aL(aT))||n(aT)){L=K.NONE;var aR=h(b(aT).parent().children(".date").get(0));return aK(aR)}else{if(X(aT)){L=K.NONE;var aS=h(b(aT).siblings(".date").get(0));return new d(aS.firstDateOfMonth(),aS.lastDateOfMonth(),av.locale)}else{if(aU){if(aF.days()>0&&aL(aT)){L=K.NONE;aF=aF.expandTo(h(aT));return aF}}}}return aF}function aK(aS){var aR=aS;var aT=aS.plusDays(6);if(av.disableWeekends){aR=aS.withWeekday(e.MONDAY);aT=aS.withWeekday(e.FRIDAY)}return new d(aR,aT,av.locale).and(H)}}function ap(aL){if(L==K.NONE){return}var aK=h(aL.target);var aM={move:function(){var aN=j.distanceInDays(aK);var aO=aF.shiftDays(aN).and(H);if(v(aO)){j=aK;aF=aO}},create:function(){var aN=new d(j,aK,av.locale);if(ar(aL.target)&&v(aN)){aF=aN}}};aM[L]();aw()}function v(aK){return aK.isPermittedRange(av.minimumRange,av.disableWeekends,H)}function z(){L=K.NONE;if(aj()){aF=d.emptyRange()}aw();aB()}function aj(){for(var aK in av.disabledDates){if(aF.hasDate(new c(aK))){return true}}return false}function aw(){aF=d.rangeWithMinimumSize(aF,av.minimumRange,av.disableWeekends,H);ab(aF);b("span.rangeLengthLabel",am).text(av.locale.daysLabel(aF.days()))}function ab(aK){b("td.selected",am).removeClass("selected").removeClass("rangeStart").removeClass("rangeEnd").removeClass("invalidSelection");W(aK);l=aK.clone()}function W(aK){if(aK.days()==0){return}var aN=ax[a.format(aK.start,"Ymd",av.locale)];var aM=ax[a.format(aK.end,"Ymd",av.locale)];for(var aL=aN;aL<=aM;aL++){m(aL,aK.start,aK.end)}if(aj()){b("td.selected",am).addClass("invalidSelection")}}function m(aN,aP,aK){var aM=aH[aN];var aO=Q(aN).get(0);var aL=[F(aM)];if(aM.equalsOnlyDate(aK)){aL.push("selected rangeEnd")}else{if(aM.equalsOnlyDate(aP)){aL.push("selected rangeStart")}else{if(aM.isBetweenDates(aP,aK)){aL.push("selected")}}}aO.className=aL.join(" ")}function aB(){if(aj()){aF=d.emptyRange();setTimeout(function(){ab(aF)},200)}var aL=G(aF.start);var aK=G(aF.end);am.data("calendarRange",aF);p(aL);ak(aK);A();if(av.selectWeek){q.close(b("td.selected",am).first())}aG(aF)}function A(){if(aF.start&&aF.end){var aK=av.locale.weekDateFormat;b("span.startDateLabel",am).text(a.format(aF.start,aK,av.locale));b("span.endDateLabel",am).text(a.format(aF.end,aK,av.locale));b("span.separator",am).show()}else{b("span.separator",am).hide()}}function t(aK){return aK.length>0&&aK.val().length>0?a.parse(aK.val()):null}function aJ(aK){if(b.browser.mozilla){b(aK).css("MozUserSelect","none")}else{if(b.browser.msie){b(aK).bind("selectstart",function(){return false})}else{b(aK).mousedown(function(){return false})}}}function aG(aK){av.callback.call(am,aK);am.trigger("calendarChange",aK)}function N(aK){return b(aK).closest("[date-cell-index]").hasClass("date")}function n(aK){return b(aK).hasClass("week")}function X(aK){return b(aK).hasClass("month")}function ar(aK){return !b(aK).hasClass("disabled")}function h(aK){return aH[b(aK).closest("[date-cell-index]").attr("date-cell-index")]}function Q(aK){return b(ao[aK])}function p(aK){av.startField.val(aK)}function ak(aK){av.endField.val(aK)}function G(aK){return aK?a.shortDateFormat(aK,av.locale):""}function o(aK){b("span.startDateLabel",am).text(aK)}function af(){return av.endField&&av.endField.length>0}}};b.fn.calendarRange=function(){return b(this).data("calendarRange")};b.fn.exists=function(){return this.length>0};b.fn.isEmpty=function(){return this.length==0}});